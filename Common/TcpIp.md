# TCP/IP

Segment(TCP 수준에서)
Packet = '택배'? IP 수준에서

택배 배송을 위해 트럭에 싫는다. 트럭 = Frame?

기본적으로 TCP가 UDP보다 느린 이유
클라이언트측 TCP에서 서버로부터 세그먼트 둘 수신 후, Ack#3(잘 수신했음)을 서버로 보내게 되는데, 서버는 세그먼트 #1,#2를 보낸 후 #3을 보내고 있지 않고 클라이언트의 Ack를 대기하고 있는다. 이 타이밍에 의해 Ack로 인한 속도지연이 생기게 된다.

window size: 세그먼트 수신측에서 세그먼트를 수신하여 조립할 수 있는 공간.
Ack 전송시 window size를 포함하여 보내는데, 서버에서는 ACK를 수신 후, 수신측의 window size를 보고 다음 세그먼트의 사이즈와 비교 후 그 다음 세그먼트를 보낼지 말지 판단. 만약 사이즈가 부족하다면 다음 세그먼트를 보내지 않음..! Wait가 걸린다!!

클라이언트측이 수신 준비가 되어있지 않아 느릴 수도 있다는 의미!

클라이언트 프로그램(프로세스) - 소켓(File I/O) - TCP/IP - Driver - NIC
소켓 - File I/O Buffer 
TCP - TCP Buffer, window size

TCP 버퍼의 윈도우 사이즈가 부족하기 전에 조립된 세그먼트를 소켓 버퍼로 빠르게 올려야함.
즉, 프로세스의 Read 속도 > 네트워크 수신 속도 보다 빨라야한다.
안그러면 부족해진 window size로 인하여 서버는 다음 세그먼트를 보내지 않고 Wait이 걸리기 때문.
이런 경우 네트워크 지연이 발생하게 되는데, 네트워크 문제나 서버의 문제를 찾고 있을 문제가 아니라는 것. 클라이언트, 즉 수신측의 문제라는 점이다.
